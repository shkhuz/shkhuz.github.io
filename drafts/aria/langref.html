<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Aria Language Reference</title>
<link rel="apple-touch-icon" sizes="180x180" href="/assets/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/favicon-16x16.png">
<link rel="manifest" href="/assets/site.webmanifest">
<link rel=stylesheet href="/style.css">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QQS3D5BETB"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QQS3D5BETB');
</script>

<script data-host="https://microanalytics.io" data-dnt="false" src="https://microanalytics.io/js/script.js" id="ZwSg9rf6GA" async defer></script>

<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>

<script>
(function() {
  var h, a, f;
  a = document.getElementsByTagName('link');
  for (h = 0; h < a.length; h++) {
    f = a[h];
    if (f.rel.toLowerCase().match(/stylesheet/) && f.href) {
      var g = f.href.replace(/(&|\?)rnd=\d+/, '');
      f.href = g + (g.match(/\?/) ? '&' : '?');
      f.href += 'rnd=' + (new Date().valueOf());
    }
  } // for
})()
</script>

</head>

<body>
<article>
<h1 id="huzaifa-aria-language-reference"><a href='/'>huzaifa</a> / Aria Language Reference</h1>
<pre class='aria'><code><span class='k'>import</span> <span class='s'>"std"</span>;
<span class='k'>import</span> <span class='s'>"GameObject.ar"</span>;

<span class='k'>use</span> std.{
    Vec,
    HashMap,
    io.stdin,
    math.Vector2,
};

<span class='k'>struct</span> Player&lt;T: Integer&gt; {
    pos: Vector2,
    vel: Vector2,
    id: T,
}

<span class='k'>fn</span> print&lt;T&gt;(fmt: []<span class='t'>u8</span>, args: T) <span class='t'>void</span>
<span class='k'>where</span> T: Tuple
{
}

<span class='k'>fn</span> main() <span class='t'>void</span> {
    print(<span class='s'>"hello, {}"</span>, [<span class='s'>"df"</span>]);
    <span class='k'>imm</span> v <span class='k'>=</span> Vec::&lt;<span class='t'>u32</span>&gt;.new();
    v.push(<span class='n'>1</span>);
    v.push(<span class='n'>2</span>);
    <span class='k'>imm</span> sum <span class='k'>=</span> v
        .sum()
        .collect::&lt;<span class='t'>u32</span>&gt;();
    <span class='k'>imm</span> pairs: [_][<span class='t'>usize</span>, []<span class='t'>u8</span>] <span class='k'>=</span> [[<span class='n'>0</span>, <span class='s'>"zero"</span>], [<span class='n'>1</span>, <span class='s'>"one"</span>]];
    <span class='k'>imm</span> size <span class='k'>=</span> <span class='i'>@sizeof</span>(<span class='t'>u32</span>);
    <span class='k'>mut</span> player <span class='k'>=</span> Player {
        .pos <span class='k'>=</span> Vector2.from_double(<span class='n'>1.0</span>, <span class='n'>2.0</span>),
        .vel <span class='k'>=</span> Vector2.zero,
        .id <span class='k'>=</span> {
            <span class='k'>imm</span> ptr <span class='k'>=</span> get_default_id_ref();
            ptr.* +<span class='k'>=</span> <span class='n'>1</span>;
            <span class='k'>yield</span> ptr.* - <span class='n'>1</span>;
        },
    };
    game.register_player(player);
}

<span class='k'>error</span> FileError {
    invalid_path: []<span class='t'>u8</span>,
    cannot_open: []<span class='t'>u8</span>,
}

<span class='k'>fn</span> read_file(path: []<span class='t'>u8</span>) FileError![]<span class='t'>u8</span> {
}
</code></pre>
<div class="code-snippet-filename">
main.ar
</div>
<pre class='aria'><code><span class='k'>fn</span> malloc&lt;T&gt;(n: <span class='t'>usize</span>) ![]T {
    <span class='k'>imm</span> page <span class='k'>=</span> current_page()?;
    <span class='k'>imm</span> ptr <span class='k'>=</span> page.ptr?;
    page.ptr +<span class='k'>=</span> n;
    <span class='k'>return</span> []T [.ptr <span class='k'>=</span> ptr, .len <span class='k'>=</span> n];
}

<span class='k'>fn</span> realloc&lt;T&gt;(old: []T, newsize: <span class='t'>usize</span>) ![]T {
    <span class='k'>imm</span> new <span class='k'>=</span> malloc(newsize);
    memcpy(new, old);
    free(old);
    <span class='k'>return</span> new;
}

<span class='k'>struct</span> Vec&lt;T&gt; {
    data: []T,
    len: <span class='t'>usize</span>,
    cap: <span class='t'>usize</span>,

    <span class='k'>imm</span> default_len <span class='k'>=</span> <span class='n'>8</span>;
    <span class='k'>imm</span> multiplier <span class='k'>=</span> <span class='n'>1.5</span>;
}

<span class='k'>impl</span>&lt;T&gt; Vec&lt;T&gt; {
    <span class='k'>fn</span> new() !<span class='t'>Self</span> {
        <span class='k'>return</span> <span class='t'>Self</span> [
            .data <span class='k'>=</span> malloc(
                <span class='i'>@sizeof</span>(T) * <span class='t'>Self</span>.default_len)?,
            .len <span class='k'>=</span> <span class='n'>0</span>,
            .cap <span class='k'>=</span> <span class='t'>Self</span>.default_len,
        ];
    }

    <span class='k'>fn</span> push(<span class='c'>self</span>: *<span class='t'>Self</span>, elem: T) !<span class='t'>void</span> {
        grow()?;
        <span class='c'>self</span>.data[<span class='c'>self</span>.len] <span class='k'>=</span> elem;
        <span class='c'>self</span>.len +<span class='k'>=</span> <span class='n'>1</span>;
    }

    <span class='k'>fn</span> grow(<span class='c'>self</span>: *<span class='t'>Self</span>) !<span class='t'>void</span> {
        <span class='k'>if</span> (<span class='c'>self</span>.len <span class='k'>=</span><span class='k'>=</span> <span class='c'>self</span>.cap) {
            <span class='k'>imm</span> newcap <span class='k'>=</span> (<span class='c'>self</span>.cap * <span class='n'>1.5</span>) <span class='k'>as</span> <span class='t'>usize</span>;
            <span class='c'>self</span>.data <span class='k'>=</span> realloc(<span class='c'>self</span>.data, newcap)?;
            <span class='c'>self</span>.cap <span class='k'>=</span> newcap;
        }
    }
}

<span class='k'>trait</span> ToString {
    <span class='k'>fn</span> to_string(<span class='c'>self</span>: *<span class='t'>Self</span>) String;
}

<span class='k'>impl</span>&lt;T: ToString&gt; ToString <span class='k'>for</span> Vec&lt;T&gt; {
    <span class='k'>fn</span> to_string(<span class='c'>self</span>: *<span class='t'>Self</span>) String {
        <span class='k'>mut</span> s <span class='k'>=</span> String.new();
        <span class='k'>for</span> (<span class='c'>self</span>.data) <span class='k'>|</span>e, i<span class='k'>|</span> {
            s.append(e.to_string());
            <span class='k'>if</span> (i !<span class='k'>=</span> <span class='c'>self</span>.data.len-<span class='n'>1</span>) s.append(<span class='s'>", "</span>);
        }
    }
}
</code></pre>
<div class="code-snippet-filename">
std.ar
</div>
<pre class='aria'><code><span class='k'>import</span> <span class='s'>"std"</span>;
<span class='k'>use</span> std.{malloc, Vec, ToString};

<span class='k'>fn</span> main() <span class='t'>void</span> {
    <span class='k'>mut</span> v <span class='k'>=</span> Vec::&lt;<span class='t'>i32</span>&gt;.new();
    v.push(<span class='n'>1</span>);
    v.push(<span class='n'>2</span>);

    std.println(<span class='s'>"{}"</span>, v.to_string]);[
}
</code></pre>
<div class="code-snippet-filename">
main.ar
</div>
<pre class='aria'><code><span class='k'>error</span> AllocError {
    mem_not_available: <span class='t'>i8</span>,
}

<span class='k'>fn</span> malloc&lt;T&gt;(n: <span class='t'>usize</span>) ?![]T {
    <span class='k'>imm</span> page <span class='k'>=</span> get_current_page()?;
}

<span class='k'>fn</span> get_current_page() !Page {
    <span class='k'>return</span> <span class='k'>error</span>.std.FileError.not_found: <span class='n'>10</span>;
}

<span class='k'>union</span>(<span class='k'>enum</span>) U {
    real: <span class='t'>f32</span>,
    int: <span class='t'>i32</span>,
}

<span class='k'>union</span>(<span class='k'>enum</span>) Expr {
    binary: [?*Expr, ?*Expr],
    unary: ?*Expr,
}

<span class='k'>fn</span> main() {
    <span class='k'>imm</span> expr: Expr <span class='k'>=</span> Expr.binary: [<span class='c'>null</span>, <span class='c'>null</span>];
    <span class='k'>return</span> <span class='k'>error</span>.not_found: [<span class='s'>"main.ar"</span>, <span class='s'>"File not found"</span>];
}
</code></pre>
</article>
</body>
</html>